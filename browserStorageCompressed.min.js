function BrowserStorage(g,h,w,k){function x(a){for(var c in a)if(a.hasOwnProperty(c))return q=0,!1;return!0}function l(a){if(""===a)return{};a=a.split("%a");q=a.length;for(var c={},d,b=0;b<a.length;b++)d=a[b].split("%b"),c[d[0].replace(y,"%")]=(d[1]||"").replace(y,"%");return c}function u(a){var c=[],d=0,b;for(b in a)a.hasOwnProperty(b)&&(d++,c.push(b.replace(z,"%p")+"%b"+a[b].replace(z,"%p")));q=d;return c.join("%a")}function m(a,c,d){if("function"!==typeof a||"function"!==typeof c||"function"!==
typeof d)throw Error("TypeError: expected type function, found "+("function"!==typeof a?typeof a:"function"!==typeof c?typeof c:typeof d));var b=String.fromCharCode(++A);n[b]=[c,d];p[a.name]=b;r.push(a)}function B(a,c,d){var b=String.fromCharCode(++A);n[b]=[c,d];p[""+a]=b;r.push(""+a)}function v(a){if(a[0]){var c=a[0],b=a.substring(1);if(n[c])return n[c][1](b);throw Error('Missing deserializer for string "'+a+'"');}return""}var n={},p={},r=[],A=32,b={},e="",q=0,z=/%/g,y=/%p/g;B("undefined",function(){return"undefined"},
function(){});B("null",function(){return"null"},function(){return null});m(String,function(a){return a},function(a){return a});m(Number,function(a){return""+a},function(a){return+a});m(Boolean,function(a){return""+a},function(a){return"true"===a});m(Object,function(a){return JSON.stringify(a)},function(a){return JSON.parse(a)});m(Date,function(a){return+a},function(a){return new Date(+a)});if(window.localStorage&&!h)var f=window.localStorage;else if(window.sessionStorage&&h)f=window.sessionStorage;
else{var C=h?"":";expires="+new Date(+new Date+307584E5);f={getItem:function(a){if(0<document.cookie.length){var c=document.cookie.indexOf(a+"=");if(-1!==c)return c=c+a.length+1,a=document.cookie.indexOf(";",c),-1===a&&(a=document.cookie.length),decodeURIComponent(document.cookie.substring(c,a))}return""},setItem:function(a,c){document.cookie=a+"="+encodeURIComponent(c)+C+"; path=/"},removeItem:function(a){document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},clear:function(){for(var a=
document.cookie.split(";"),c=0;c<a.length;c++){var b=a[c],e=b.indexOf("=");b=-1<e?b.substr(0,e):b;document.cookie=b+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}}}}h=f.getItem(g);null!==h&&(e=k(h)||"",b=l(e));var t={get:function(a,c){c&&(e=k(f.getItem(g)||"")||"",b=l(e));return a in b?v(b[a]):null},getOrDefault:function(a,c,d){d&&(e=k(f.getItem(g)||"")||"",b=l(e));return a in b?v(b[a]):c},forEach:function(a,c){c&&(e=k(f.getItem(g)||"")||"",b=l(e));for(var d in b)b.hasOwnProperty(d)&&a(d,v(b[d]));
return t},contains:function(a,c){c&&(e=k(f.getItem(g)||"")||"",b=l(e));return a in b},set:function(a,c){e=k(f.getItem(g)||"")||"";b=l(e);a:if(p[c]){var d=p[""+c];d+=n[d][0](c)}else if(c.constructor&&c.constructor.name&&p[c.constructor.name])d=p[c.constructor.name],d+=n[d][0](c);else{for(d=0;d<r.length;d++)if(c instanceof r[d]){d=p[r[d].name];d=n[d][0](c);break a}throw Error("Missing serializer for object "+c+" (type "+typeof c+")");}if(a in b)b[a]=d,e=u(b);else if(""===e)b={},b[a]=d,e=u(b);else{var h=
{};h[a]=d;var m=q;e+="%a"+u(h);q=m+1;b[a]=d}f.setItem(g,w(e));return t},remove:function(a){a in b&&(delete b[a],e=u(b),x(b)?f.removeItem(g):f.setItem(g,w(e)));return t},clear:function(){f.clear();b={};e="";return t},isEmpty:function(a){a&&(e=k(f.getItem(g)||"")||"",b=l(e));return x(b)},length:function(a){a&&(e=k(f.getItem(g)||"")||"",b=l(e));return q}};return t};