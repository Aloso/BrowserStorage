function BrowserStorage(f,m,x,h){function y(a){for(var b in a)if(a.hasOwnProperty(b))return r=0,!1;return!0}function k(a){if(""===a)return{};a=a.split("%a");r=a.length;for(var b={},d,c=0;c<a.length;c++)d=a[c].split("%b"),b[d[0].replace(z,"%")]=(d[1]||"").replace(z,"%");return b}function v(a){var b=[],d=0,c;for(c in a)a.hasOwnProperty(c)&&(d++,b.push(c.replace(A,"%p")+"%b"+a[c].replace(A,"%p")));r=d;return b.join("%a")}function t(a,b,d,c){if("function"!==typeof a||"function"!==typeof b||"function"!==
typeof d)throw Error("TypeError: expected type function, found "+("function"!==typeof a?typeof a:"function"!==typeof b?typeof b:typeof d));c=null==c?String.fromCharCode(++B):c;n[c]=[b,d];p[a.name]=c;u.push(a)}function C(a,b,d){var c=String.fromCharCode(++B);n[c]=[b,d];p[""+a]=c;u.push(""+a)}function w(a){if(a[0]){var b=a[0],d=a.substring(1);if(n[b])return n[b][1](d);throw Error('Missing deserializer for string "'+a+'"');}return""}function D(a,b,d){if(a.addEventListener)return a.addEventListener(b,
d,!1),!0;if(a.attachEvent)return a.attachEvent("on"+b,d);b="on"+b;"function"===typeof a[b]&&(d=function(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}(a[b],d));a[b]=d;return!0}var n={},p={},u=[],B=32,c={},e="",r=0,A=/%/g,z=/%p/g;C("undefined",function(){return"undefined"},function(){});C("null",function(){return"null"},function(){return null});t(String,function(a){return a},function(a){return a});t(Number,function(a){return""+a},function(a){return+a});t(Boolean,function(a){return""+
a},function(a){return"true"===a});t(Object,function(a){return JSON.stringify(a)},function(a){return JSON.parse(a)});t(Date,function(a){return+a},function(a){return new Date(+a)});var l=[];if(window.localStorage&&!m){var g=window.localStorage;D(window,"storage",function(a){if(a.key===f){e=h(g.getItem(f)||"")||"";c=k(e);for(var b=0;b<l.length;b++)l[b](a)}})}else if(window.sessionStorage&&m)g=window.sessionStorage,D(window,"storage",function(a){if(a.key===f){e=h(g.getItem(f)||"")||"";c=k(e);for(var b=
0;b<l.length;b++)l[b](a)}});else{x=h=function(a){return a};var E=m?"":";expires="+new Date(+new Date+307584E5);g={getItem:function(a){if(0<document.cookie.length){var b=document.cookie.indexOf(a+"=");if(-1!==b)return b=b+a.length+1,a=document.cookie.indexOf(";",b),-1===a&&(a=document.cookie.length),decodeURIComponent(document.cookie.substring(b,a))}return""},setItem:function(a,b){document.cookie=a+"="+encodeURIComponent(b)+E+"; path=/"},removeItem:function(a){document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},
clear:function(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){var d=a[b],c=d.indexOf("=");d=-1<c?d.substr(0,c):d;document.cookie=d+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"}}};setInterval(function(){var a=h(g.getItem(f)||"")||"";if(a!==e)for(e=a,c=k(e),a=0;a<l.length;a++)l[a]()},500)}m=g.getItem(f);null!==m&&(e=256<m.charCodeAt(0)||!("LZString"in window)?h(m)||"":m,c=k(e));var q={get:function(a,b){b&&(e=h(g.getItem(f)||"")||"",c=k(e));return a in c?w(c[a]):null},getOrDefault:function(a,
b,d){d&&(e=h(g.getItem(f)||"")||"",c=k(e));return a in c?w(c[a]):b},getOrElse:function(a,b,d){d&&(e=h(g.getItem(f)||"")||"",c=k(e));return a in c?w(c[a]):b(a)},forEach:function(a,b){b&&(e=h(g.getItem(f)||"")||"",c=k(e));for(var d in c)c.hasOwnProperty(d)&&a(d,w(c[d]));return q},contains:function(a,b){b&&(e=h(g.getItem(f)||"")||"",c=k(e));return a in c},set:function(a,b){e=h(g.getItem(f)||"")||"";c=k(e);a:if(p[b]){var d=p[""+b];d+=n[d][0](b)}else if(b.constructor&&b.constructor.name&&p[b.constructor.name])d=
p[b.constructor.name],d+=n[d][0](b);else{for(d=0;d<u.length;d++)if("function"===typeof u[d]&&b instanceof u[d]){d=p[u[d].name];d+=n[d][0](b);break a}throw Error("Missing serializer for object "+b+" (type "+typeof b+")");}if(a in c)c[a]=d,e=v(c);else if(""===e)c={},c[a]=d,e=v(c);else{var l={};l[a]=d;var m=r;e+="%a"+v(l);r=m+1;c[a]=d}g.setItem(f,x(e));return q},remove:function(a){e=h(g.getItem(f)||"")||"";c=k(e);a in c&&(delete c[a],e=v(c),y(c)?g.removeItem(f):g.setItem(f,x(e)));return q},clear:function(){g.removeItem(f);
c={};e="";return q},isEmpty:function(a){a&&(e=h(g.getItem(f)||"")||"",c=k(e));return y(c)},length:function(a){a&&(e=h(g.getItem(f)||"")||"",c=k(e));return r},addListener:function(a){l.push(a);return q},removeListener:function(a){for(var b=0;b<l.length;b++)l[b]===a&&l.splice(b,1);return q},addType:function(a,b,c,e){if(isNaN(a)||50>a)throw Error("Identifier must be a number >= 50");if(n[a])throw Error("This ID is already in use");t(b,c,e,String.fromCharCode(a))}};return q};